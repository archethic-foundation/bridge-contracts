doctype html
html(lang="en")
  head
    title Chargeable HTLCs (EVM -> ARCH)
    link(rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css")
    script(src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js")
    script(src="https://cdn.jsdelivr.net/npm/jquery.fancytable/dist/fancyTable.min.js")
    script
        | $(document).ready(function() {
        |   $("table").fancyTable({
        |     sortColumn:5,
        |     sortOrder:"desc",
        |     pagination:true,
        |     perPage:200,
        |     globalSearch:true
        |   });
        | });

  body(style="font-family: monospace; font-size: 0.75rem;")
    h1 Chargeable HTLCs (EVM -> ARCH)
    table(class="table")
        thead
            tr
                th(scope="col") chain
                th(scope="col") contract
                th(scope="col") user
                th(scope="col") status
                th(scope="col") created
                th(scope="col") until
                th(scope="col") amount

                th(scope="col" class="table-primary") contract
                th(scope="col" class="table-primary") user
                th(scope="col" class="table-primary") status
                th(scope="col" class="table-primary") created
                th(scope="col" class="table-primary") until
                th(scope="col" class="table-primary") amount

        tbody
            each htlc in htlcs
                tr
                    if htlc.evmHtlc
                        td #{htlc.evmHtlc.chain}
                        td
                            a(href=`${htlc.evmHtlc.explorer}address/${htlc.evmHtlc.address}`) #{formatEvmAddr(htlc.evmHtlc.address)}
                        td
                            a(href=`${htlc.evmHtlc.explorer}address/${htlc.evmHtlc.userAddress}`) #{formatEvmAddr(htlc.evmHtlc.userAddress)}
                        td #{htlc.evmHtlc.status}
                        td
                        td #{formatDate(new Date(htlc.evmHtlc.lockTime * 1000))}
                        td #{htlc.evmHtlc.amount}
                    else
                        td
                        td
                        td
                        td
                        td
                        td
                        td

                    td(class="table-primary")
                        a(href=`${archethicEndpoint}/explorer/chain?address=${htlc.address}`) #{formatArchethicAddr(htlc.address)}
                    td(class="table-primary")
                        a(href=`${archethicEndpoint}/explorer/chain?address=${htlc.userAddress}`) #{formatArchethicAddr(htlc.userAddress)}
                    td(class="table-primary") #{HTLC_STATUS[htlc.htlcStatus]}
                    td(class="table-primary") #{formatDate(new Date(htlc.creationTime * 1000))}
                    td(class="table-primary") #{formatDate(new Date(htlc.endTime * 1000))}
                    td(class="table-primary") #{(htlc.userAmount + htlc.refundAmount) / 100000000}
